<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>포켓몬 도감</title>
  <style>
    @font-face {
      font-family: "CAFE24-PRO-UP";
      src: url("https://cdn.jsdelivr.net/gh/projectnoonnu/2507-1@1.0/Cafe24PROUP.woff2")
        format("woff2");
      font-weight: normal;
      font-display: swap;
    }

    body {
      font-family: "CAFE24-PRO-UP";
      background-color: #f3f7ff;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
    }

    /* 검색창 */
    #search-form {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 2rem;
    }
    #search-form input {
      padding: 0.5rem 1rem;
      border: 2px solid #5E739F;
      border-radius: 0.5rem;
      font-size: 1rem;
      width: 200px;
    }
    #search-form button {
      padding: 0.5rem 1.2rem;
      background-color: #5E739F;
      color: white;
      border: none;
      border-radius: 0.5rem;
      font-size: 1rem;
      cursor: pointer;
      font-family: "NeoDunggeunmoCode", sans-serif;
    }
    #search-form button:hover {
      background-color: #4A5B7F;
    }

    /* 도감 카드 */
    .pokedex-card {
      width: 320px;
      border: 5px solid #5E739F;
      background-color: #5E739F;
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      display: none;
      flex-direction: column;
      text-align: center;
      /* position: relative; <- 이제 필요 없습니다 */
    }

    /* --- ▼ 여기가 핵심 수정 부분입니다 ▼ --- */

    /* 카드 헤더 (이름 부분) */
    .poke-header {
      background-color: #5E739F;
      color: white;
      padding: 1rem 1rem; /* 패딩 값 미세 조정 */
      border-top-left-radius: 0.7rem;
      border-top-right-radius: 0.7rem;
      /* Flexbox로 이름과 번호를 양쪽으로 배치 */
      display: flex;
      justify-content: space-between;
      align-items: flex-start; /* 상단 정렬 */
    }

    .poke-name-group {
        text-align: left; /* 이름 그룹은 왼쪽 정렬 */
    }

    /* 포켓몬 번호 */
    .poke-number {
      /* position: absolute; <- 제거 */
      /* top: 10px; <- 제거 */
      /* right: 10px; <- 제거 */
      background-color: white;
      border: 2px solid #5E739F;
      border-radius: 0.5rem;
      padding: 0.3rem 0.8rem;
      font-weight: normal;
      color: #333;
      font-size: 1.1rem;
      /* flex 아이템이 줄어들지 않도록 설정 */
      flex-shrink: 0;
      margin-top: 5px; /* 위치 미세 조정 */
    }
    
    /* --- ▲ 여기가 핵심 수정 부분입니다 ▲ --- */

    .poke-koname {
      font-size: 2.2rem;
      font-weight: normal;
      margin-bottom: 0.3rem;
      color: white;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .poke-jpname, .poke-enname {
      font-size: 1.1rem;
      color: #C5D0E9;
      letter-spacing: 1px;
    }

    /* 카드 본문 (이미지 부분) */
    .poke-body {
        background-color: #ffffff;
        padding: 1rem;
    }

    .poke-img {
      width: 180px;
      height: 180px;
      object-fit: contain;
    }

    /* 카드 푸터 (정보 부분) */
    .poke-footer {
        display: flex;
        background-color: #5E739F;
        padding: 0.7rem;
        border-bottom-left-radius: 0.7rem;
        border-bottom-right-radius: 0.7rem;
    }
    .info-box {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        color: white;
    }
    .info-label {
        font-size: 1rem;
        margin-bottom: 0.3rem;
    }
    .info-content {
        background: white;
        width: 90%;
        padding: 0.5rem;
        border-radius: 0.8rem;
        color: #333;
        font-size: 1.2rem;
        font-weight: normal;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
        box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
    }

    .type-badge {
      padding: 0.3rem 0.6rem;
      border-radius: 0.5rem;
      font-size: 0.9rem;
      color: white;
    }

    /* 타입별 색상 (채도 재조정) */
    .type-fire { background: #F4823A; }
    .type-water { background: #6890F0; }
    .type-grass { background: #78C850; }
    .type-electric { background: #F8D030; }
    .type-ice { background: #98D8D8; }
    .type-fighting { background: #C55A54; }
    .type-poison { background: #A040A0; }
    .type-ground { background: #E0C068; }
    .type-flying { background: #A890F0; }
    .type-psychic { background: #F85888; }
    .type-bug { background: #A8B820; }
    .type-rock { background: #B8A038; }
    .type-ghost { background: #705898; }
    .type-dragon { background: #7038F8; }
    .type-dark { background: #705848; }
    .type-steel { background: #B8B8D0; }
    .type-fairy { background: #EE99AC; }
    .type-normal { background: #A8A878; }
  </style>
</head>
<body>
  <form id="search-form">
    <input type="text" id="poke-input" placeholder="번호 / 이름 입력"/>
    <button>검색</button>
  </form>

  <div id="pokedex" class="pokedex-card">
    <div class="poke-header">
      <div class="poke-name-group">
        <div id="poke-koname" class="poke-koname">포켓몬</div>
        <div id="poke-jpname" class="poke-jpname">ポケモン</div>
        <div id="poke-enname" class="poke-enname">Pokemon</div>
      </div>
      <div id="poke-number" class="poke-number">No.000</div>
    </div>
    <div class="poke-body">
      <img id="poke-img" class="poke-img" src="" alt="포켓몬"/>
    </div>

    <div class="poke-footer">
        <div class="info-box">
            <span class="info-label">타입</span>
            <div class="info-content" id="poke-types"></div>
        </div>
        <div class="info-box">
            <span class="info-label">분류</span>
            <div class="info-content" id="poke-classname"></div>
        </div>
    </div>
  </div>

  <script>
    const typeTranslations = {
        normal: "노말", fire: "불", water: "물", grass: "풀", electric: "전기",
        ice: "얼음", fighting: "격투", poison: "독", ground: "땅", flying: "비행",
        psychic: "에스퍼", bug: "벌레", rock: "바위", ghost: "고스트", dragon: "드래곤",
        dark: "악", steel: "강철", fairy: "페어리",
    };

    async function resolveInputToId(input) {
      if (!isNaN(input)) {
        return parseInt(input, 10);
      }
      try {
        const res = await fetch(`https://pokeapi.co/api/v2/pokemon/${input.toLowerCase()}`);
        if (res.ok) {
          const data = await res.json();
          return data.id;
        }
      } catch (e) {}
      for (let i = 1; i <= 1025; i++) {
        try {
            const speciesRes = await fetch(`https://pokeapi.co/api/v2/pokemon-species/${i}`);
            if (!speciesRes.ok) continue;
            const speciesData = await speciesRes.json();
            const koName = speciesData.names.find(n => n.language.name === "ko");
            if (koName && koName.name === input) {
              return i;
            }
        } catch(e) { continue; }
      }
      return null;
    }

    async function searchPoke(event) {
      event.preventDefault();
      const name = document.querySelector("#poke-input").value.trim();
      if (!name) return;

      const pokeNo = await resolveInputToId(name);
      if (!pokeNo) {
        alert("존재하지 않는 포켓몬입니다!");
        return;
      }

      const res = await fetch(`https://pokeapi.co/api/v2/pokemon/${pokeNo}`);
      const data = await res.json();

      const speciesRes = await fetch(`https://pokeapi.co/api/v2/pokemon-species/${pokeNo}`);
      const speciesData = await speciesRes.json();
      
      const koNameObj = speciesData.names.find(n => n.language.name === "ko");
      const enName = data.name.charAt(0).toUpperCase() + data.name.slice(1);
      const jpNameObj = speciesData.names.find(n => n.language.name === 'ja-Hrkt' || n.language.name === 'ja');
      const koGenusObj = speciesData.genera.find(g => g.language.name === "ko");

      document.querySelector("#poke-number").textContent = `No.${String(pokeNo).padStart(3, '0')}`;
      document.querySelector("#poke-img").src = data.sprites.other['official-artwork'].front_default || data.sprites.front_default;
      document.querySelector("#poke-koname").textContent = koNameObj ? koNameObj.name : "이름 없음";
      document.querySelector("#poke-jpname").textContent = jpNameObj ? jpNameObj.name : "";
      document.querySelector("#poke-enname").textContent = enName;
      document.querySelector("#poke-classname").textContent = koGenusObj ? koGenusObj.genus : "알 수 없음";

      const typeContainer = document.querySelector("#poke-types");
      typeContainer.innerHTML = "";
      data.types.forEach(t => {
        const typeNameEn = t.type.name;
        const typeNameKo = typeTranslations[typeNameEn] || typeNameEn.toUpperCase();
        
        const span = document.createElement("span");
        span.className = `type-badge type-${typeNameEn}`;
        span.textContent = typeNameKo;
        typeContainer.appendChild(span);
      });
      
      document.querySelector("#pokedex").style.display = "flex";
    }

    document.querySelector("#search-form").addEventListener("submit", searchPoke);
  </script>
</body>
</html>